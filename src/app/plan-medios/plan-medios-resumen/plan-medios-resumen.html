<div class="resumen-container">
  <!-- Cabecera con título -->
  <div class="resumen-header">
    <h1>Resumen del Plan: {{ resumenPlan.numeroPlan }} | Versión: {{ resumenPlan.version }}</h1>
  </div>

  <!-- Información del plan y botones -->
  <div class="plan-info-container">
    <!-- Información del plan -->
    <div class="plan-info">
      <div class="info-item">
        <span class="info-label">CLIENTE:</span>
        <span class="info-value">{{ resumenPlan.cliente }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">PRODUCTO:</span>
        <span class="info-value">{{ resumenPlan.producto }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">FECHA:</span>
        <span class="info-value">{{ resumenPlan.fecha }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">CAMPAÑA:</span>
        <span class="info-value">{{ resumenPlan.campana }}</span>
      </div>
    </div>

    <!-- Botones de acción -->
    <div class="action-buttons">
      <div class="left-buttons">
        <button mat-flat-button class="action-button yellow-button" (click)="onNuevaPauta()">
          <mat-icon>note_add</mat-icon>
          Nueva Pauta
        </button>
        <button mat-flat-button class="action-button yellow-button" (click)="onDescargaFlow()">
          <mat-icon>cloud_download</mat-icon>
          Descarga Flow
        </button>
        <button mat-flat-button class="action-button yellow-button" (click)="onDescargaFlowChart()">
          <mat-icon>insert_chart</mat-icon>
          Descarga FlowChart
        </button>
      </div>
      <div class="right-buttons">
        <button mat-flat-button class="action-button yellow-button" (click)="onAprobarPlan()">
          <mat-icon>check_circle</mat-icon>
          Aprobar Plan
        </button>
        <button mat-flat-button class="action-button blue-button" (click)="onRegresar()">
          <mat-icon>arrow_back</mat-icon>
          Regresar
        </button>
      </div>
    </div>
  </div>

  <!-- Tabla de medios -->
  <div class="table-container">
    <table mat-table [dataSource]="resumenPlan.medios" class="mat-elevation-z8">
      <!-- Medio Column -->
      <ng-container matColumnDef="medio">
        <th mat-header-cell *matHeaderCellDef>MEDIOS</th>
        <td mat-cell *matCellDef="let medio">{{ medio.nombre }}</td>
        <td mat-footer-cell *matFooterCellDef>Total Inversión Neta</td>
      </ng-container>

      <!-- Salidas Column -->
      <ng-container matColumnDef="salidas">
        <th mat-header-cell *matHeaderCellDef>SALIDAS</th>
        <td mat-cell *matCellDef="let medio">{{ medio.salidas }}</td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <!-- Valor Neto Column -->
      <ng-container matColumnDef="valorNeto">
        <th mat-header-cell *matHeaderCellDef>Valor neto</th>
        <td mat-cell *matCellDef="let medio">{{ medio.valorNeto | currency:'USD':'symbol-narrow':'1.0-0' }}</td>
        <td mat-footer-cell *matFooterCellDef>{{ resumenPlan.totalInversionNeta | currency:'USD':'symbol-narrow':'1.0-0' }}</td>
      </ng-container>

      <!-- SOI Column -->
      <ng-container matColumnDef="soi">
        <th mat-header-cell *matHeaderCellDef>SOI</th>
        <td mat-cell *matCellDef="let medio">{{ medio.soi }}%</td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <!-- Semanas Column -->
      <ng-container matColumnDef="semanas">
        <th mat-header-cell *matHeaderCellDef>
          <div class="semanas-header">
            <span *ngFor="let semana of semanasColumnas">{{ semana }}</span>
          </div>
        </th>
        <td mat-cell *matCellDef="let medio">
          <div class="semanas-cell">
            <div *ngFor="let activo of medio.semanas" 
                 class="semana-indicator"
                 [class.activo]="activo">
            </div>
          </div>
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
    </table>

    <div class="totales">
      <div class="total-row">
        <span>IVA 19%</span>
        <span>{{ resumenPlan.iva | currency:'USD':'symbol-narrow':'1.0-0' }}</span>
      </div>
      <div class="total-row">
        <span>Total Inversión</span>
        <span>{{ resumenPlan.totalInversion | currency:'USD':'symbol-narrow':'1.0-0' }}</span>
      </div>
    </div>
  </div>
</div> 